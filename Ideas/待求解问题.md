# 问题及解决方案

1. 数据预处理和分析  
    缺失值分析,采样, 每个产品各星级的数量, 数据清洗
    1. 删除了marketplace(所有样例数据的值一样), product_category(所有样例数据的值一样),, product_parent(除了pacifier里边的两个异常值例外, 其他所有数据, 只要product_id一样, product_parent也一样故只保留一个字段), 同时由于product_id和product_title冗余, 删除product_title
    2. 所有数据中只有四行数据有缺失值, 故直接删除
    3. 根据review_date数据增加两列数据: 年, 月

2. 任务: 
    - 分析所提供的三个产品数据集，以识别，描述和提供数学证据，有意义的定量和/或定性模式，关系，测量，和参数之间的星级评级，评论，和Helpfulness Rating，将帮助阳光公司在他们的三个新的在线市场产品提供成功。
        - 利用机器学习的lgb模型(可获得各个指标()的权重)预测星级, 同时加入一个特征: 产品的好评率($\frac{Numbers Of 4+Star}{total numbers}$)
        - ****删除五星好评却情感极低或一星差评情感极高数据(未做)***

    - 使用您的分析来解决以下具体问题:
        1. 确定最能提供信息的数据测量方法，一旦阳光公司的三种产品在网上市场上销售，就可以根据评级和评论来方便阳光公司跟踪。
            - 先对评论进行情感分析, 评级和情感一致, 商品评价就是好, 不一致的话再分析, 挖掘它为什么不一致, 并且评级*a+评论*b=评价, 权重是由信息熵确定的

        2. 识别并讨论每个数据集中基于时间的度量和模式，这些度量和模式可能表明产品在在线市场中的声誉正在增加或减少。
            - 要求已指明，是“基于时间的衡量方法和模式”。此处的模式可以想象成“以时间作为存储数据”的逻辑，类似于线性表，只不过坐标轴是时间。
                这一问中，想找到某种数据间的关联，这关联能表明产品的声誉是在随时间增加还是减少。因此这里就需要先对“时间”和“评级”建模，对“评级”的建模方法可参照a题，把星级和评论合二为一再处理；
                而对时间也得进行处理，因为在一段时间内，可能存在褒贬不一的情况，那么这个时候就需要在这段时间内对评级进行处理。
                例如，把好评差评按照权重进行综合；
                或者，对评价进行语言处理，分析一下到底是“真好评、真黑粉”还是“真差评、刷好评”。
                而在对评级、时间处理之后，就可以建立“时间-评级”模型，可以把产品的评价转化成数值，数值越高评级越好。这样的话，也许就能做出一条随时间变化的评级曲线：比如，好评（假设已经对一段时间内的好评差评进行综合处理之后）越来越多，那么曲线应该就是越来越高的；反之，口碑崩了的话，评级就会一落千丈。
                最后，需要在上述“时间-评级”模型的拐点进行处理，在拐点处对评级进行分析，是什么原因导致评级发生了变化。
                是有人发了好评，引起了更多人的共鸣？
                是有黑子带节奏，让不知情的人也来诋毁你的产品？
                还是什么其他原因？
                最后，才能得出基于时间的度量方法和模式，才能分析基于时间模式的产品声誉变化。

        3. 确定基于文本的度量方法和基于评级的度量方法的组合，以最好地指示潜在的成功或失败的产品。
            - 根据评价内容进行文本摘要提取(或情感分析), 基于下边Review公式得出分值, 最后根据摘要情感(好或者不好)和计算的分值进行组合(PCA或其他方法得到二者的权重)得出产品成功和失败(x)
            - 用第二问结果进行不同的分析
        4. 特定的评级会引发更多的评论吗?例如，在看到一系列的低星级评价后，客户更有可能撰写某种类型的评论吗?
            - 探寻客户的情绪是否会随着他人的评论而被调动。就是让你分析一下，是不是人们都有从众心理，是不是容易被带节奏（包括带好节奏和带坏节奏）。

                在这个问题中，只需要在前几问的时间模式基础下，分析一段时间内是否会有较为集中的好评或差评即可。
                当然也可以说客户不容易被带动情绪，只有数据充分、言之有理即可。

        5. 基于文本的评论的特定质量描述符，如“热情”、“失望”等，是否与评级水平密切相关?
            - 挖掘文本摘要结果和评级的关系回答此问: 建立每个星级的词云可视化结果, 聚类
            - 词频图
            - 词频表(可以作为附录补充)
            - 词云图


        6. 给阳光公司的市场总监写一封一到两页的信，总结你的团队的分析和结果。包括你的团队最自信地向市场总监推荐的结果的具体理由。
            - 样板市场, 明星市场分析

# 附:

1. 亚马逊Review分值计算公式:
$\frac{(H+C_1+\log{min(Length,1750))}}{(\log 350)*(T+C_2)}+\frac{\frac{X}{2}*Trust+\frac{X}{2}*Recency}{T+C_2}$

    - H: 认为有帮助投票数--the number of helpful votes a review received

    - T: 评论收到的总投票数--the number of total votes a review received

    - X: log(1750) / log (C2)

    - Length: 评论长度--length of a review

    - Trust:
        - 2 * (sigmoid(# of reviews written by a reviewer * 0.1) - 0.5) 
        Trust:信任度：2 *(sigmoid(同一评论者撰写评论数 * 0.1) - 0.5)

        - Otherwise: sigmoid(同一评论者撰写评论数 * 0.1) - 0.5

    - R: 
        - - 2 * 1/(1+exp((time - submission_date) / (30 months)))

    - 常数C1, C2, and C3: Constants set differently by marketplace. In the US, C1, C2, and C3 are 13.1056, 350, and 20.04, respectively.
